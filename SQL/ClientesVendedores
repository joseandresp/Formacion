CREATE SEQUENCE COD_CLIENTE_SEQ
 START WITH     0
 INCREMENT BY   1
 NOCACHE
 NOCYCLE;

CREATE TABLE CLIENTES(
COD_CLIENTE    NUMBER,
NOMBRE         VARCHAR2(30),
NUM_TELEFONO   VARCHAR2(30),
EMAIL          VARCHAR2(30), 
DIRECCION      VARCHAR2(30),  
PRIMARY KEY (COD_CLIENTE)
);

CREATE SEQUENCE COD_VENDEDOR_SEQ
 START WITH     0
 INCREMENT BY   1
 NOCACHE
 NOCYCLE;
 
CREATE TABLE VENDEDORES(
COD_VENDEDOR   NUMBER,
NOMBRE         VARCHAR2(40),
NUM_TELEFONO   VARCHAR2(30),
EMAIL          VARCHAR2(30), 
DIRECCION      VARCHAR2(30),  
PRIMARY KEY (COD_VENDEDOR)
);

CREATE TABLE ARTICULOS(
COD_ARTICULO          VARCHAR2(40),
DESCRIPCION           VARCHAR2(40),
STOCK_MINIMO          NUMBER,
CANTIDAD_DISPONIBLE   NUMBER,
PRECIO_UNIDAD         NUMBER(5,2),  
OBSERVACIONES         VARCHAR2(250)

);

CREATE SEQUENCE NUM_FACTURA_SEQ
 START WITH     0
 INCREMENT BY   1
 NOCACHE
 NOCYCLE;
 
CREATE TABLE FACTURAS(
NUM_FACTURA    NUMBER,
FECHA          DATE,
COD_CLIENTE    NUMBER,
COD_VENDEDOR   NUMBER,
ANULADA              CHAR,
RECTIFICATIVA        CHAR,  
NUM_FACTURA_RECTIFICADA NUMBER,
PRIMARY KEY (NUM_FACTURA)
);

ALTER TABLE FACTURAS ADD CONSTRAINT FK_CLIENTE FOREIGN KEY (COD_CLIENTE) REFERENCES CLIENTES (COD_CLIENTE);
ALTER TABLE FACTURAS ADD CONSTRAINT FK_VENDEDOR FOREIGN KEY (COD_VENDEDOR) REFERENCES VENDEDORES (COD_VENDEDOR);

CREATE TABLE DETALLE_FACTURA(
NUM_DETALLE        VARCHAR(80),  --Este es el concatenado de CODFACTURA y CODARTICULO
COD_FACTURA        VARCHAR2(40),
COD_ARTICULO       VARCHAR2(40),
PRECIO_UNIDAD         NUMBER(5,2), 
CANTIDAD_TOTAL        NUMBER,  
IVA                   NUMBER(3,2),
PRIMARY KEY (NUM_DETALLE)
);


INSERT INTO CLIENTES (COD_CLIENTE, NOMBRE, NUM_TELEFONO, EMAIL, DIRECCION) VALUES (1,'JOSE','1111111','1@gmail.es','C/Deseperacion1');
INSERT INTO CLIENTES (COD_CLIENTE, NOMBRE, NUM_TELEFONO, EMAIL, DIRECCION) VALUES (2,'MARIA','222222','2@gmail.es','C/Deseperacion1');
INSERT INTO CLIENTES (COD_CLIENTE, NOMBRE, NUM_TELEFONO, EMAIL, DIRECCION) VALUES (3,'JESUS','333333','3@gmail.es','C/Deseperacion2');

INSERT INTO VENDEDORES (COD_VENDEDOR, NOMBRE, NUM_TELEFONO, EMAIL, DIRECCION) VALUES (1,'SATAN','44444','V1@gmail.es','C/Suicidio');
INSERT INTO VENDEDORES (COD_VENDEDOR, NOMBRE, NUM_TELEFONO, EMAIL, DIRECCION) VALUES (2,'DIOS','555555','V2@gmail.es','C/UnTiro');

INSERT INTO ARTICULOS (COD_ARTICULO, DESCRIPCION, STOCK_MINIMO, CANTIDAD_DISPONIBLE, PRECIO_UNIDAD,OBSERVACIONES) VALUES ('1','MESA',10,43,100.00,'');
INSERT INTO ARTICULOS (COD_ARTICULO, DESCRIPCION, STOCK_MINIMO, CANTIDAD_DISPONIBLE, PRECIO_UNIDAD,OBSERVACIONES) VALUES ('2','SILLA',12,48,80.00,'');
INSERT INTO ARTICULOS (COD_ARTICULO, DESCRIPCION, STOCK_MINIMO, CANTIDAD_DISPONIBLE, PRECIO_UNIDAD,OBSERVACIONES) VALUES ('3','SOFA',15,50,200.00,'');
INSERT INTO ARTICULOS (COD_ARTICULO, DESCRIPCION, STOCK_MINIMO, CANTIDAD_DISPONIBLE, PRECIO_UNIDAD,OBSERVACIONES) VALUES ('4','CAMA',5,7,250.99,'');
INSERT INTO ARTICULOS (COD_ARTICULO, DESCRIPCION, STOCK_MINIMO, CANTIDAD_DISPONIBLE, PRECIO_UNIDAD,OBSERVACIONES) VALUES ('5','LAMPARA',6,8,49.99,'');
